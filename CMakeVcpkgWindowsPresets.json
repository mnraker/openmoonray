{
  "version": 6,
  "configurePresets": [
    {
      "name": "win-vcpkg-env",
      "hidden": true,
      "warnings": { "dev": false },
      "generator": "Ninja",
      "binaryDir": "${sourceDir}/_build/${presetName}",
      "environment": {
        "VCPKG_ROOT": "$env{VCPKG_ROOT}",
        "VCPKG_FEATURE_FLAGS": "manifests,versions,binarycaching"
      },
      "cacheVariables": {
        "CMAKE_TOOLCHAIN_FILE": "$env{VCPKG_ROOT}/scripts/buildsystems/vcpkg.cmake",
        "VCPKG_TARGET_TRIPLET": "x64-windows",
        "CMAKE_BUILD_TYPE": "Release",
        "CMAKE_INSTALL_PREFIX": "${sourceDir}/_install/${presetName}",

        "BUILD_QT_APPS": "OFF",
        "MOONRAY_USE_CUDA": "OFF",
        "MOONRAY_USE_OPTIX": "OFF",

        "ABI_VERSION": "0"
      }
    },

    {
      "name": "windows-vcpkg-local-release",
      "displayName": "Windows vcpkg (local) Ninja Release",
      "inherits": "win-vcpkg-env",
      "cacheVariables": {
        "BUILD_QT_APPS": "ON",

        "OMR_BUILD_HYDRA": "ON",
        "OMR_BUILD_DENOISE": "ON",
        "OMR_BUILD_MOONRAY_ARRAS": "OFF",
        "OMR_BUILD_DCC_PLUGINS": "OFF",
        "OMR_BUILD_MOONSHINE_USD": "ON",
        "OMR_BUILD_TOOLS": "ON",
        "OMR_BUILD_DWA_EXT": "ON"
      }
    },

    {
      "name": "windows-vcpkg-local-debug",
      "displayName": "Windows vcpkg (local) Ninja Debug",
      "inherits": "windows-vcpkg-local-release",
      "cacheVariables": {
        "CMAKE_BUILD_TYPE": "Debug",
        "CMAKE_INSTALL_PREFIX": "${sourceDir}/_install/windows-vcpkg-local-debug"
      }
    },

    {
      "name": "windows-vcpkg-local-minimal-release",
      "displayName": "Windows vcpkg (local) Ninja Release (minimal)",
      "inherits": "win-vcpkg-env",
      "cacheVariables": {
        "OMR_BUILD_HYDRA": "OFF",
        "OMR_BUILD_DENOISE": "OFF",
        "OMR_BUILD_MOONRAY_ARRAS": "OFF",
        "OMR_BUILD_DCC_PLUGINS": "OFF",
        "OMR_BUILD_MOONSHINE_USD": "OFF",
        "OMR_BUILD_TOOLS": "OFF",
        "OMR_BUILD_DWA_EXT": "OFF"
      }
    },

    {
      "name": "windows-vcpkg-local-minimal-debug",
      "displayName": "Windows vcpkg (local) Ninja Debug (minimal)",
      "inherits": "windows-vcpkg-local-minimal-release",
      "cacheVariables": {
        "CMAKE_BUILD_TYPE": "Debug",
        "CMAKE_INSTALL_PREFIX": "${sourceDir}/_install/windows-vcpkg-local-minimal-debug"
      }
    },

    {
      "name": "windows-vcpkg-moonraker-release",
      "displayName": "Windows vcpkg (Moonraker) Ninja Release",
      "inherits": "win-vcpkg-env",
      "environment": {
        "VCPKG_BINARY_SOURCES": "clear;nuget,<MOONRAKER_NUGET_FEED>,readwrite"
      },
      "cacheVariables": {
        "BUILD_QT_APPS": "ON",

        "OMR_BUILD_HYDRA": "ON",
        "OMR_BUILD_DENOISE": "ON",
        "OMR_BUILD_MOONRAY_ARRAS": "OFF",
        "OMR_BUILD_DCC_PLUGINS": "OFF",
        "OMR_BUILD_MOONSHINE_USD": "ON",
        "OMR_BUILD_TOOLS": "ON",
        "OMR_BUILD_DWA_EXT": "ON"
      }
    },

    {
      "name": "windows-vcpkg-moonraker-debug",
      "displayName": "Windows vcpkg (Moonraker) Ninja Debug",
      "inherits": "windows-vcpkg-moonraker-release",
      "cacheVariables": {
        "CMAKE_BUILD_TYPE": "Debug",
        "CMAKE_INSTALL_PREFIX": "${sourceDir}/_install/windows-vcpkg-moonraker-debug"
      }
    },

    {
      "name": "windows-vcpkg-moonraker-minimal-release",
      "displayName": "Windows vcpkg (Moonraker) Ninja Release (minimal)",
      "inherits": "win-vcpkg-env",
      "environment": {
        "VCPKG_BINARY_SOURCES": "clear;nuget,<MOONRAKER_NUGET_FEED>,readwrite"
      },
      "cacheVariables": {
        "OMR_BUILD_HYDRA": "OFF",
        "OMR_BUILD_DENOISE": "OFF",
        "OMR_BUILD_MOONRAY_ARRAS": "OFF",
        "OMR_BUILD_DCC_PLUGINS": "OFF",
        "OMR_BUILD_MOONSHINE_USD": "OFF",
        "OMR_BUILD_TOOLS": "OFF",
        "OMR_BUILD_DWA_EXT": "OFF"
      }
    },

    {
      "name": "windows-vcpkg-moonraker-minimal-debug",
      "displayName": "Windows vcpkg (Moonraker) Ninja Debug (minimal)",
      "inherits": "windows-vcpkg-moonraker-minimal-release",
      "cacheVariables": {
        "CMAKE_BUILD_TYPE": "Debug",
        "CMAKE_INSTALL_PREFIX": "${sourceDir}/_install/windows-vcpkg-moonraker-minimal-debug"
      }
    }
  ],

  "buildPresets": [
    { 
      "name": "windows-vcpkg-local-release", 
      "configurePreset": "windows-vcpkg-local-release", 
      "targets": ["install"] 
    },
    { 
      "name": "windows-vcpkg-local-debug", 
      "configurePreset": "windows-vcpkg-local-debug", 
      "targets": ["install"] 
    },
    { 
      "name": "windows-vcpkg-local-minimal-release", 
      "configurePreset": "windows-vcpkg-local-minimal-release", 
      "targets": ["install"] 
    },
    { 
      "name": "windows-vcpkg-local-minimal-debug", 
      "configurePreset": "windows-vcpkg-local-minimal-debug", 
      "targets": ["install"] 
    },

    { 
      "name": "windows-vcpkg-moonraker-release", 
      "configurePreset": "windows-vcpkg-moonraker-release", 
      "targets": ["install"] 
    },
    { 
      "name": "windows-vcpkg-moonraker-debug", 
      "configurePreset": "windows-vcpkg-moonraker-debug", 
      "targets": ["install"] 
    },
    { 
      "name": "windows-vcpkg-moonraker-minimal-release", 
      "configurePreset": "windows-vcpkg-moonraker-minimal-release", 
      "targets": ["install"] 
    },
    { 
      "name": "windows-vcpkg-moonraker-minimal-debug", 
      "configurePreset": "windows-vcpkg-moonraker-minimal-debug", 
      "targets": ["install"] 
    }
  ]
}
